{"version":3,"file":"static/webpack/static\\development\\pages\\search_invitations.js.9bd5b64df244e4517f4d.hot-update.js","sources":["webpack:///./pages/search_invitations.js"],"sourcesContent":["import Layout from '../components/MyLayout';\r\nimport Link from 'next/link';\r\n\r\nclass SearchInvitations extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      searchStringInput: '',\r\n      matchingInvitations: [],\r\n      error: false,\r\n      isLoaded: false\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.searchInvitationsForGuest = this.searchInvitationsForGuest.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({\r\n        searchStringInput: event.target.value\r\n    });\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    let searchString = this.state.searchStringInput\r\n    console.log(`Search String: ${searchString}`)\r\n    this.searchInvitationsForGuest(searchString)\r\n    event.preventDefault();\r\n  }\r\n\r\n searchInvitationsForGuest(searchString) {\r\n    console.log(`in search invitations function with input: ${searchString}`)\r\n    let requestBody = {\r\n      'guest_search_string': '' + searchString + ''\r\n    }\r\n    console.log(`request body: ${JSON.stringify(requestBody)}`)\r\n    const invitationSearchResponse = fetch('http://localhost:8080/guest_invitations/search', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify(requestBody)\r\n    })\r\n    .then(function(response) {\r\n      if (!response.ok) {\r\n        throw Error(response.statusText);\r\n      }\r\n      return response;\r\n    })\r\n    .then((response) => {\r\n      return response.json()\r\n    })\r\n    .then((data) => {\r\n      console.log('Success:', data);\r\n      this.setState({\r\n        'matchingInvitations': data,\r\n        'isLoaded': true,\r\n        'error': false\r\n      })\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error:', error);\r\n      this.setState({\r\n        'isLoaded': true,\r\n        'error': true\r\n      })\r\n    });\r\n\r\n  }\r\n\r\n  render() {\r\n    const { searchStringInput, matchingInvitations, isLoaded, error } = this.state\r\n\r\n    var invitationToGuestsMap = new Map()\r\n    if (matchingInvitations) {\r\n      for (var i = 0; i < matchingInvitations.length; i++) {\r\n        let invitation = matchingInvitations[i]\r\n        console.log(`invitation = ${invitation}`)\r\n        var guestsForInvitation = ''\r\n        if (invitation && invitation.guests) {\r\n          for (var j = 0; j < invitation.guests.length; j++) {\r\n            guestsForInvitation += invitation.guests[j].guest_name\r\n            if (j != invitation.guests.length - 1) {\r\n              guestsForInvitation += ', '\r\n            }\r\n          }\r\n        }\r\n        invitationToGuestsMap[invitation.invitation_id] = guestsForInvitation\r\n      }\r\n    } else {\r\n      console.log(`no matching invitations`)\r\n    }\r\n\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          <form onSubmit={this.handleSubmit}>\r\n            <label>\r\n              Name:\r\n              <input type=\"text\" value={this.state.searchStringInput} onChange={this.handleChange} />\r\n            </label>\r\n            <input type=\"submit\" value=\"Submit\" />\r\n          </form>\r\n          <style jsx>{`\r\n            label {\r\n              font-family: 'Arial';\r\n            }\r\n          `}</style>\r\n        </div>\r\n        <div>\r\n          <br></br>\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Invitation ID</th>\r\n                <th>Guest(s)</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {matchingInvitations.map(invitation =>\r\n                <tr key={invitation.invitation_id}>\r\n                  <td>\r\n                    <Link href={{ pathname: \"/invitation\", query: { invitationId: invitation.invitation_id}}}>\r\n                      <a>{invitation.invitation_id}</a>\r\n                    </Link>\r\n                  </td>\r\n                  <td>\r\n                    {invitationToGuestsMap[invitation.invitation_id]}\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n          <style jsx>{`\r\n            th {\r\n              font-family: 'Arial';\r\n            }\r\n            td {\r\n              font-family: 'Arial';\r\n            }\r\n          `}</style>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default function SearchInvitationsLayout() {\r\n  return (\r\n    <Layout>\r\n      <br></br>\r\n      <SearchInvitations/>\r\n    </Layout>\r\n  );\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AAXA;AAYA;AACA;;;AACA;AACA;AACA;AADA;AAGA;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AANA;AASA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAHA;AAKA;AAEA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AAEA;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANA;AAAA;AAAA;AAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPA;AAVA;AAAA;AAAA;AAmCA;;;;AAhJA;AACA;AAkJA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;A","sourceRoot":""}